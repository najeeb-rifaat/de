echo ">>> Installing dependencies"
sudo pacman -S --noconfirm git python-pywal redshift xcompmgr
sudo pacman -S --noconfirm gst-plugins-base gst-plugins-good gst-plugins-bad gst-plugins-ugly
sudo pacman -S --noconfirm iw neovim python python-pip
sudo pacman -S --noconfirm mpv cb scrot imagemagic i3lock xbindkeys
yay -S --noconfirm xkb-switch

echo ">>>> Installing images"
install -m755 -D ./wallpaper.jpg $HOME/Pictures/system/wallpaper.jpg

echo ">>>> Installing lockscreen"
sudo install -m644 -D ./sleeplock.service /etc/systemd/system/sleeplock.service
sudo systemctl daemon-reload
sudo systemctl enable sleeplock.service

echo ">>>> Installing scripts"
install -m755 -D ./lock.sh $HOME/.local/bin/lock
install -m755 -D ./status.sh $HOME/.local/bin/status_bar

echo ">>>> Installing Xorg settings"
sudo cp -rf ./xorg.conf.d/*.conf /etc/X11/xorg.conf.d/

echo ">>>> Installing fonts"
cp -rf fonts/** ~/.fonts/
fc-cache -f

echo ">>>> Setting wallpaper"
feh --bg-scale $HOME/Pictures/system/wallpaper.jpg

echo ">>>> Generating color schemes"
wal -i $HOME/Pictures/system/wallpaper.jpg
sed "17d" $HOME/.cache/wal/colors-wal-dwm.h > $HOME/.cache/wal/colors-wal-dwm.6.2.h

echo ">>>> Setting Xkeybind"
install -m755 -D ./.xbindkeysrc $HOME/.xbindkeysrc

echo ">>>> Setting Xinit"
install -m755 -D ./.xinitrc $HOME/.xinitrc

git submodule foreach ./install.sh
